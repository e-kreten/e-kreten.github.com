<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KRET√âN Napl√≥ - Bejelentkez√©s</title>
  <link rel="stylesheet" href="https://e-kreten.github.io/src/naplo_login_style.css">
</head>
<body>
  <div class="animated-bg" id="background"></div>

  <button class="settings-btn" onclick="toggleSettings()">‚öôÔ∏è</button>
  <div class="settings-panel" id="settingsPanel">
    <label for="color1">Sz√≠n 1:</label>
    <input type="color" id="color1" value="#3e8ef7" onchange="updateColors()"><br>
    <label for="color2">Sz√≠n 2:</label>
    <input type="color" id="color2" value="#6c5ce7" onchange="updateColors()"><br>
    <label for="theme">T√©ma:</label>
    <button class="theme-toggle" onclick="toggleTheme()" id="theme">üåô</button>
  </div>

  <div class="login-box">
    <div class="logo-header">
        <img id="logo" src="https://e-kreten.github.io/src/logo-dark.png" alt="KRET√âN Logo Dark">
    </div>
    <h2>Bejelentkez√©s</h2>
    <label for="institution">Int√©zm√©ny</label>
    <select id="institution">
      <option value="">-- V√°lassz int√©zm√©nyt --</option>
      <option value="iskola1">Iskola 1</option>
      <option value="iskola2">Iskola 2</option>
      <option value="iskola3">Iskola 3</option>
    </select>

    <label for="username">Felhaszn√°l√≥n√©v</label>
    <input type="text" id="username" placeholder="Add meg a felhaszn√°l√≥neved">

    <label for="password">Jelsz√≥</label>
    <input type="password" id="password" placeholder="Add meg a jelszavad">

    <button onclick="login()">Bejelentkez√©s</button>
  </div>

  <script>
    function login() {
      const institution = document.getElementById('institution').value;
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      if (!institution || !username || !password) {
        alert("K√©rlek, t√∂lts ki minden mez≈ët!");
        return;
      }

      alert(`Bejelentkez√©s: ${institution}, ${username}`);
      localStorage.setItem('local_usr', username);
      localStorage.setItem('local_pw', password);
      localStorage.setItem('local_institution', institution);
      window.location.href = "https://e-kreten.github.io/naplo";
    }

    function toggleSettings() {
      const panel = document.getElementById('settingsPanel');
      panel.style.display = (panel.style.display === 'block') ? 'none' : 'block';
    }
    function updateColors() {
    const color1 = document.getElementById('color1').value;
    const color2 = document.getElementById('color2').value;
    document.documentElement.style.setProperty('--color1', color1);
    document.documentElement.style.setProperty('--color2', color2);
    
    // Mentsd el localStorage-be
    localStorage.setItem('bgColor1', color1);
    localStorage.setItem('bgColor2', color2);
    }
    window.onload = function () {
    const savedColor1 = localStorage.getItem('bgColor1');
    const savedColor2 = localStorage.getItem('bgColor2');

    if (savedColor1 && savedColor2) {
        document.documentElement.style.setProperty('--color1', savedColor1);
        document.documentElement.style.setProperty('--color2', savedColor2);
        document.getElementById('color1').value = savedColor1;
        document.getElementById('color2').value = savedColor2;
    }
    };
    function toggleTheme() {
    const current = document.body.classList.contains("dark") ? "light" : "dark";
    setTheme(current);

  if (current == "light") {
    document.querySelector(".theme-toggle").innerText = "üåô";
  } else {
    document.querySelector(".theme-toggle").innerText = "üîÜ";
  }
  }

  function setTheme(theme) {
    document.body.classList.remove("light", "dark");
    document.body.classList.add(theme);
    localStorage.setItem("theme", theme);

    const logo = document.getElementById("logo");
    if (theme === "dark") {
      logo.src = "https://e-kreten.github.io/src/logo.png";
      logo.alt = "KRET√âN Logo Light"
    } else {
      logo.src = "https://e-kreten.github.io/src/logo-dark.png";
      logo.alt = "KRET√âN Logo Dark"
    }
  }

  window.onload = function () {
    const savedColor1 = localStorage.getItem('bgColor1');
    const savedColor2 = localStorage.getItem('bgColor2');
    const savedTheme = localStorage.getItem("theme") || "light";

    if (savedColor1 && savedColor2) {
      document.documentElement.style.setProperty('--color1', savedColor1);
      document.documentElement.style.setProperty('--color2', savedColor2);
      document.getElementById('color1').value = savedColor1;
      document.getElementById('color2').value = savedColor2;
    }
    if (savedTheme == "light") {
    document.querySelector(".theme-toggle").innerText = "üåô";
  } else {
    document.querySelector(".theme-toggle").innerText = "üîÜ";
  }

    setTheme(savedTheme);
  };
  </script>
</body>
      </html>
